{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/bits-manipulation/","result":{"data":{"markdownRemark":{"html":"<h2>Basic Operations</h2>\n<ul>\n<li>When we have multiple bits, the binary operators are applied bitwise</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>AND <code class=\"language-text\">&amp;</code></th>\n<th>OR <code class=\"language-text\">|</code></th>\n<th>XOR <code class=\"language-text\">^</code></th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n</tr>\n<tr>\n<td>1</td>\n<td>0</td>\n<td>0</td>\n<td>1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>0</td>\n<td>1</td>\n<td>0</td>\n<td>1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n<td>0</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>The complement is computed using the <code class=\"language-text\">~</code> sign: <code class=\"language-text\">~10011 = 01100</code>.</li>\n<li>left shift <code class=\"language-text\">&lt;&lt;</code> : shift all the bits to the left and pad the right bits with zeros</li>\n<li>right shif <code class=\"language-text\">&gt;&gt;</code> : shift all the bits to the right and pad left position with zero bits. </li>\n</ul>\n<h2>2’s complement</h2>\n<ul>\n<li>2’s complement is a way to represent signed numbers in a binary system. The following rule applies. We obtain the number negative by flipping all its bits and adding 1 to it. For example:</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/cs-wiki/static/0cfef455878e78464b0bad3cf2824f33/f8915/5b901f8f5d43099682a98921bc7a9b57f67691eb.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 98.82352941176471%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAADEUlEQVQ4y21UaVPiQBTk//8mP7Cuq65aCnIf4cx9E0I4FHtfPxiP1VRNQd5Merr79Uzt7e0Nx+NRx+vrEXxc18XN9TWajSaazy00nhp4uH9Avz9E6/yeJCn+f4hRi9MVOJKs0N8wzhAlOfwgQRhlCKIUnh/DlTGd27h/aOCp2UF/aKHbG6DV7qHd6WM4niHN16gR4NflNR4bbfnAQaszwNWfv6jXr1C/vMHd/SN+X93q/MiaodsfC9gED4/PuLio4/buUVR08dzu6ya1KFnBC2IZCfh/6QRYLD1YkwXm8mvL+3zhYmH7sN1QlKyFSYlOd6hgZJ4VFUJR5foRarbjoSfUx9YUnU5PJKfYbHfY7V+QZmJHkmG7P6CstshWa6zLDQoZ290BSZojL0qpVTpYrwVhhOl0LqwczGYLBSg3W2wEIF8VyPKVblBuKnlfKzDnOZI0w2pd6lrWi7UAul6AwXCEyWSG8XgisjNdQBADWCngVgE3Z0DOp1mOVUHAndYV0PMDjEYWZvMlLJEdUbJMEiTLC/3oJ0DWqObE8BOgH5wkL21XJZPhWuRRQirsKIuL6VEmjCndzMeSRbVBLagUvBbFCaYCZNsOJtOZNmK722N/eAHZc5OdNIW1UzP2OlizrIlkNda1rBG4RonsNJvjuL6wKpQNWXEz1sufGMrHnh/KYTgr+Mxwcu4yG0Pf+FG13StDT5r2zcPqlILFwhbAs8fGwyCMMRiMtCHMY/ipKQSkHZ8BDRgZ0Q56b+QqYBgl2pS57DadzT9yKCBsmO242sX3HJ4zSFBjldnwBCgMmT+CWSKZXS7PDH3xaLG0vwXbdJ1zJPAFkDtQMn1kHj8k7+F6vjBffkguTh6eslid0iEsVTI95NFjliiLJ4Z+0GQupkxGgnXjWaaSq/dBS0yX+V6wy7F0eSkZXAp9eskukxGz5bie1B29KFijJLKp9PI4aLB5WZicElQZMjKOUGdjzI1C3yiZc+8nJf96Uhi5VWEujHMOefjpgycfU7K5Pbgj/TU5NGfVeKhnXU4Va2aeoP8A9bfi+Pqvs2EAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"5b901f8f5d43099682a98921bc7a9b57f67691eb.png\"\n        title=\"5b901f8f5d43099682a98921bc7a9b57f67691eb.png\"\n        src=\"/cs-wiki/static/0cfef455878e78464b0bad3cf2824f33/c5bb3/5b901f8f5d43099682a98921bc7a9b57f67691eb.png\"\n        srcset=\"/cs-wiki/static/0cfef455878e78464b0bad3cf2824f33/04472/5b901f8f5d43099682a98921bc7a9b57f67691eb.png 170w,\n/cs-wiki/static/0cfef455878e78464b0bad3cf2824f33/9f933/5b901f8f5d43099682a98921bc7a9b57f67691eb.png 340w,\n/cs-wiki/static/0cfef455878e78464b0bad3cf2824f33/c5bb3/5b901f8f5d43099682a98921bc7a9b57f67691eb.png 680w,\n/cs-wiki/static/0cfef455878e78464b0bad3cf2824f33/f8915/5b901f8f5d43099682a98921bc7a9b57f67691eb.png 748w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>Compared to other systems for representing signed numbers (e.g., <a href=\"https://en.wikipedia.org/wiki/Ones%27_complement\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ones' complement</a>), two's complement has the advantage that the fundamental arithmetic operations of <a href=\"https://en.wikipedia.org/wiki/Addition\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">a</a>ddition, subtraction and multiplication are identical to those for unsigned binary numbers (as long as the inputs are represented in the same number of bits as the output, and any overflow beyond those bits is discarded from the result). </li>\n<li>This property makes the system simpler to implement, especially for higher-precision arithmetic. Unlike ones' complement systems, two's complement has no representation for negative zero, and thus does not suffer from its associated difficulties.</li>\n<li>The value of a N-bit signed integer in complements two is given by the sum of powers of two of each bit, except for the most significant bit whose weight is negative</li>\n</ul>\n<div class=\"block-equation-container\"><img src=\"https://latex.codecogs.com/svg.latex?w = -a_{N-1} 2^{N-1} + \\Sigma_{i=0}^{N-2} a_i 2^i\"></div>\n<ul>\n<li>This makes sense, since we are allocating half of the space to positive numbers and half of the space to negative numbers (the first N-1 bits). Going from negative to positive is like going from the end of the range to  its beginning with the most significant bit telling us in which range we are: if it is 1 this the negative half, whe it goes to 0, it is the positive half of it. </li>\n<li>E.g. with 8 bits, we have 2^8 = 256 values. Then the value -2 is basically 256 - 3 = 10000000  </li>\n</ul>\n<h2>Bitmask Manipulation</h2>\n<p>We can use the shift operations to manipulate bitmask and use them to change specific locations in the input bynary number. </p>\n<p>A mask with a bit set at position <code class=\"language-text\">position</code> is obtained with the operation <code class=\"language-text\">1 &lt;&lt; position</code></p>\n<h3><code class=\"language-text\">set_bit</code></h3>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">void</span> <span class=\"token function\">set_bit</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> number<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> position<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">int</span> mask <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token operator\">&lt;&lt;</span> position<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> number <span class=\"token operator\">|</span> position<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/cs-wiki/static/b851d896fb48f5407e02a93344d8ad43/cecac/20d9b5c88a01812871fca9c491a4cfd5646b9646.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 23.52941176470588%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAABJUlEQVQY0yWPy3KCQBRE3eou4gDDU42CQpCXhqAi5SOpMtmlXOT/f+RkwEVP3Zo6t2/3wNQNOklp9/KSGr8842dHnDDDi9+RloPsOKFjSAczqZD5ESMuEcEbRrhBmrJnBlKqQcmy3X7RLfZ49Rlv2+AkW7zsQ8F2f9SxLILFmuvpweXyx2f74N780tY/WKb1NBTxEm01Rwtn6NJkdE4YfpcMLxtGTczosMbQBPpE4Lou6/mS1k84+jG314J7UHGaqYS6iaEaDIR6AmfGwp5iqc823NEEJbeo5ivac41UQmEilOFkrGHbNtVhz66q2NU1cZqSFnnfQGgTBh00N12mhtMnyb0VqReynca9Sj9C155m2stYVZOUWU6+ySjSnCR669WZdcw/OC6ObaAiz0MAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"20d9b5c88a01812871fca9c491a4cfd5646b9646.png\"\n        title=\"20d9b5c88a01812871fca9c491a4cfd5646b9646.png\"\n        src=\"/cs-wiki/static/b851d896fb48f5407e02a93344d8ad43/c5bb3/20d9b5c88a01812871fca9c491a4cfd5646b9646.png\"\n        srcset=\"/cs-wiki/static/b851d896fb48f5407e02a93344d8ad43/04472/20d9b5c88a01812871fca9c491a4cfd5646b9646.png 170w,\n/cs-wiki/static/b851d896fb48f5407e02a93344d8ad43/9f933/20d9b5c88a01812871fca9c491a4cfd5646b9646.png 340w,\n/cs-wiki/static/b851d896fb48f5407e02a93344d8ad43/c5bb3/20d9b5c88a01812871fca9c491a4cfd5646b9646.png 680w,\n/cs-wiki/static/b851d896fb48f5407e02a93344d8ad43/cecac/20d9b5c88a01812871fca9c491a4cfd5646b9646.png 728w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3><code class=\"language-text\">clear_bit</code></h3>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">void</span> <span class=\"token function\">clear_bit</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> number<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> position<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">int</span> mask <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token operator\">&lt;&lt;</span> position<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> number <span class=\"token operator\">&amp;</span> <span class=\"token operator\">~</span>mask<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/cs-wiki/static/fa1ef37587c522a208c432a19b9dfe65/cda19/455ee7efcda8fbaf7f3bd045b5064767c015ea11.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.058823529411764%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAABHElEQVQY0yWQa27CMBCEcwMKcRK/EigQIFCoiOPwqoqQKEWq1Pvf5mvi/hjNem3PzG4k0wwVIAN0MaeoGop1S17uMNMKpQz9u4C+VjZwlimU1P/9TAaOVF9ojTIWpQ1msSY/38g/7tjmjNnWXd8GU6M05eVJef1lfnpQHu+MNw1SJFg7QXcGkbSGtJohqilpYUk6Htz3DL4dwy/HyK9ItcR2iVzt8E1LXTecDicejyfLxSok8/MtVT4jSjv1HrtiwUTmbPKSn+rC7/qT66zmVnpsqkiECGN55zm1R47tgbbxrBZLxChGJhmZSIn6QxILXjsxLTLGJsdt3vFvey7uwK5bQW8Yj0bho9s7Dr2Y75Lua8p5yXDwgojjcP8HvfqMtBhoFdgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"455ee7efcda8fbaf7f3bd045b5064767c015ea11.png\"\n        title=\"455ee7efcda8fbaf7f3bd045b5064767c015ea11.png\"\n        src=\"/cs-wiki/static/fa1ef37587c522a208c432a19b9dfe65/c5bb3/455ee7efcda8fbaf7f3bd045b5064767c015ea11.png\"\n        srcset=\"/cs-wiki/static/fa1ef37587c522a208c432a19b9dfe65/04472/455ee7efcda8fbaf7f3bd045b5064767c015ea11.png 170w,\n/cs-wiki/static/fa1ef37587c522a208c432a19b9dfe65/9f933/455ee7efcda8fbaf7f3bd045b5064767c015ea11.png 340w,\n/cs-wiki/static/fa1ef37587c522a208c432a19b9dfe65/c5bb3/455ee7efcda8fbaf7f3bd045b5064767c015ea11.png 680w,\n/cs-wiki/static/fa1ef37587c522a208c432a19b9dfe65/cda19/455ee7efcda8fbaf7f3bd045b5064767c015ea11.png 785w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3><code class=\"language-text\">flib_bit</code></h3>\n<p>The goal is to flip the bit whaterver its value is. We can use xor. If the mask has 0s at the positions where we dont want to flip the bit, XOR will give the same bit as in the original binary number</p>\n<ul>\n<li>0 XOR 0 = 0</li>\n<li>1 XOR 0 = 1</li>\n</ul>\n<p>If the mask has 1 at the bit that we want to flip instead:</p>\n<ul>\n<li>0 XOR 1 = 1</li>\n<li>1 XOR 1 = 0</li>\n</ul>\n<p>We do filp the bit! It is necessary therefore that the mask has a single 1 at the position where we want to flip the bit.  </p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">void</span> <span class=\"token function\">flip_bit</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> number<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> position<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">int</span> mask <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token operator\">&lt;&lt;</span> position<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> number <span class=\"token operator\">^</span> mask<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> </code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/cs-wiki/static/c5bc90838b05b3486be4ea1c772ed829/a016c/6744cd845f1ae2ad215bead7c960df3356e24471.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25.294117647058822%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAABJ0lEQVQY0yWQ2U7DMBBF8wEI1CResrgkTtqmC0lKWqmgLnQBCfqAeOT/P+Tghofr8zDHnhl7kVT0UbpPkleYUY2ZLEnLBWbcEOkYLSXKedJOEEWFmnXIcobKRv195Rzp6EU6Iooi4iR1TEimNenqBbPektYrzHKDdnLivMKWvHYXzq/fvB9/2W2urJs9SkjKYcnYWDyVDxFVwaDKkZFm0JTcXdfcnxoe9k88vExdd40WitQ13BYN51HH0bbsbMM6myGEoEotc1PihUFILDXNY9Wzy+b81Ccu1YbDeMV56iZ0E4RB0K9cty1t98zH1ye7twOzxQIZCgJX930fL3CH8EMSoXsaGTOOc6weuhgKx9APuHm3R437mmz4SGkLbJaTxsl/zTm3/AFPB4s+E760iAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"6744cd845f1ae2ad215bead7c960df3356e24471.png\"\n        title=\"6744cd845f1ae2ad215bead7c960df3356e24471.png\"\n        src=\"/cs-wiki/static/c5bc90838b05b3486be4ea1c772ed829/c5bb3/6744cd845f1ae2ad215bead7c960df3356e24471.png\"\n        srcset=\"/cs-wiki/static/c5bc90838b05b3486be4ea1c772ed829/04472/6744cd845f1ae2ad215bead7c960df3356e24471.png 170w,\n/cs-wiki/static/c5bc90838b05b3486be4ea1c772ed829/9f933/6744cd845f1ae2ad215bead7c960df3356e24471.png 340w,\n/cs-wiki/static/c5bc90838b05b3486be4ea1c772ed829/c5bb3/6744cd845f1ae2ad215bead7c960df3356e24471.png 680w,\n/cs-wiki/static/c5bc90838b05b3486be4ea1c772ed829/a016c/6744cd845f1ae2ad215bead7c960df3356e24471.png 762w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3><code class=\"language-text\">is_bit_set</code></h3>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">bool</span> <span class=\"token function\">is_bit_set</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> number<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> position<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">int</span> shifted <span class=\"token operator\">=</span> number <span class=\"token operator\">>></span> position<span class=\"token punctuation\">;</span>       <span class=\"token comment\">// now the bit is the first bit</span>\n  <span class=\"token keyword\">return</span> <span class=\"token number\">1</span> <span class=\"token operator\">&amp;</span> shifted<span class=\"token punctuation\">;</span>                     <span class=\"token comment\">// get only the first bit </span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/cs-wiki/static/37af4d4a2bac0751770d737e05c4cd55/27b7a/592f90392891626d6cf0b29807fec42d97dc4adc.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsSAAALEgHS3X78AAABAElEQVQY0x2PzU7CQACE+whYutvuQtulYHGllmoLSKiCeDDEeBETIcGLvv8zfC4cJpPMJPPjKRmihERJhQoVcT7FTB4x1ZrUcWIbp0fIQDJI++y/lhyOLZ/7JW1bOC8kG8RUVU5dj/EirZEmQWSGUGnE5IbO0wx/WePXJbKwLkwwyobMm4bjYc/f74mf0zcf7zt0pEjjmOEgJYk1nlQRKjf0bUakFUk5It/NGG2mZKuC3m2GFILIPUmTlIeqZlbPqe8byqK86Of1ZwR+gBf4XYamx8Sm9HXInTW8vdyxWVnaxRh7nVwW+p0rtHuwfl7zut2ycbyYL1zZOahL0A0QDv+zwnRb/XViJgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"592f90392891626d6cf0b29807fec42d97dc4adc.png\"\n        title=\"592f90392891626d6cf0b29807fec42d97dc4adc.png\"\n        src=\"/cs-wiki/static/37af4d4a2bac0751770d737e05c4cd55/c5bb3/592f90392891626d6cf0b29807fec42d97dc4adc.png\"\n        srcset=\"/cs-wiki/static/37af4d4a2bac0751770d737e05c4cd55/04472/592f90392891626d6cf0b29807fec42d97dc4adc.png 170w,\n/cs-wiki/static/37af4d4a2bac0751770d737e05c4cd55/9f933/592f90392891626d6cf0b29807fec42d97dc4adc.png 340w,\n/cs-wiki/static/37af4d4a2bac0751770d737e05c4cd55/c5bb3/592f90392891626d6cf0b29807fec42d97dc4adc.png 680w,\n/cs-wiki/static/37af4d4a2bac0751770d737e05c4cd55/27b7a/592f90392891626d6cf0b29807fec42d97dc4adc.png 804w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3><code class=\"language-text\">modify_bit</code></h3>\n<p>With this function we combine the set and clear bit. We pass a third parameter <code class=\"language-text\">state</code> which is 0 or 1 to indicate wheter we clear or set the bit at position <code class=\"language-text\">position</code> respectively. Lets see why it works (lets assume 8bit integers)</p>\n<ul>\n<li>If <code class=\"language-text\">state=0</code> (clear bit)</li>\n<li>If <code class=\"language-text\">state=1</code> (set bit)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">void set_state<span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span> number<span class=\"token punctuation\">,</span> <span class=\"token builtin\">int</span> position<span class=\"token punctuation\">,</span> <span class=\"token builtin\">bool</span> state<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  mask <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token operator\">&lt;&lt;</span> position<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>x <span class=\"token operator\">&amp;</span> <span class=\"token operator\">~</span>mask<span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>state <span class=\"token operator\">&amp;</span> mask<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/cs-wiki/static/46eadf9042ef7e8ddb88c099568e1d0f/5d72a/08c9b74cb1f9de042a064e1050cb31ca079c14b4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 19.411764705882355%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsSAAALEgHS3X78AAAA8UlEQVQY0x2P2XqCMBQGfYQKSoAYEwEVkaJC7KJYu2jtZ9v3f5wRczE3Z5v/9CIRo/INqrDItCASIWEgUJEkjQ2zbMq6WlEWpavHYUy72/NxfOd4eEOpMZORIZGaIAjoCa0Q9pGgrRFV7paCQYCSksSMsHXD+evMYd86WWImnD5PXH+u/P/+Mc0ypqkm1xnjcERPG0lt57THinU9Y+gPEJ0p0ZMu4RjbWC7fF16fX5zsfjSf5xSLgmVHHEXd/ND1xLBLaISkMQt2acVKz/D7HjIWGKVQfkS5LN2LzaZ2sjv1esOT3bLtZHeB99DH9/wOjxtszXJZJTbp6QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"08c9b74cb1f9de042a064e1050cb31ca079c14b4.png\"\n        title=\"08c9b74cb1f9de042a064e1050cb31ca079c14b4.png\"\n        src=\"/cs-wiki/static/46eadf9042ef7e8ddb88c099568e1d0f/c5bb3/08c9b74cb1f9de042a064e1050cb31ca079c14b4.png\"\n        srcset=\"/cs-wiki/static/46eadf9042ef7e8ddb88c099568e1d0f/04472/08c9b74cb1f9de042a064e1050cb31ca079c14b4.png 170w,\n/cs-wiki/static/46eadf9042ef7e8ddb88c099568e1d0f/9f933/08c9b74cb1f9de042a064e1050cb31ca079c14b4.png 340w,\n/cs-wiki/static/46eadf9042ef7e8ddb88c099568e1d0f/c5bb3/08c9b74cb1f9de042a064e1050cb31ca079c14b4.png 680w,\n/cs-wiki/static/46eadf9042ef7e8ddb88c099568e1d0f/5d72a/08c9b74cb1f9de042a064e1050cb31ca079c14b4.png 834w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3><code class=\"language-text\">is_even</code></h3>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">bool</span> <span class=\"token function\">is_odd</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> number<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> x <span class=\"token operator\">&amp;</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>                <span class=\"token comment\">// get only the first bit -> if it is one, it is odd</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3><code class=\"language-text\">is_power_two</code></h3>\n<p>If a number is a power of 2 it has only one bit set to 1. The previous number is a binary number that has all previous bits set to 1. If we AND these two numbers we have a zero binary number. We can use this relationship to find powers of two. </p>\n<ul>\n<li>2 = 00010, 1 = 00001 → 2 &#x26; 1 = 00000</li>\n<li>4 = 00100, 3 = 00011 → 4 &#x26; 3 = 00000</li>\n<li>8 = 01000, 7 = 00111 → 8 &#x26; 7 = 00000</li>\n<li>16 = 10000, 15 = 01111 → 16 &#x26; 15 = 00000</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">bool</span> <span class=\"token function\">is_power_two</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> number<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">~</span> <span class=\"token punctuation\">(</span>x <span class=\"token operator\">&amp;</span> x<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3><code class=\"language-text\">clear_lsb</code></h3>\n<p>We want to clear the first 1 bit starting from the right. We know that we will have some amount of zeros before a 1. If we subtract 1, all the zeros, will need to borrow a 1 from the first one on the left and become 1s, while the first 1 will become 0.</p>\n<ul>\n<li>1001000 - 1  = 1000111 </li>\n</ul>\n<p>Therefore if we and the original number with this new binary number we obtain the effect of setting the LSB non zero bit to zero.</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">void</span> <span class=\"token function\">clear_lsb</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> number<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> number <span class=\"token operator\">&amp;</span> <span class=\"token punctuation\">(</span>number <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3><code class=\"language-text\">count_bits</code></h3>\n<p>We can use the following procedure to count all the bits set in a number, We repeat this procedure, setting all LSB to zero, and once all are sets, number will evaluate to false. The complexity of this algorithm is as much as the number of bits set in the original number. </p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">int</span> <span class=\"token function\">count_bits</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> number<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">int</span> counter<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>number<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    number <span class=\"token operator\">&amp;=</span> number <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    counter<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3><code class=\"language-text\">abs</code></h3>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">int_32 <span class=\"token function\">abs</span><span class=\"token punctuation\">(</span>int_32 x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token keyword\">int</span> bit31 <span class=\"token operator\">=</span> x <span class=\"token operator\">>></span> <span class=\"token number\">31</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>x <span class=\"token operator\">^</span> bit31<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> bit31<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>All major processors represent negative numbers using the two's-complement which is defined as:</p>\n<ul>\n<li>for x ≥ 0 → x</li>\n<li>for x &#x3C; 0 → NOT(x) + 1</li>\n</ul>\n<p>On the lowest level, computers provide logical bit shifts and arithmetic bit shifts. Both shifts differ in handling how to fill the empty bits on the left side.</p>\n<ul>\n<li>Logical shifts insert zeros while arithmetic shifts replicate the formerly highest bit.</li>\n<li>Whereas signed integers are arithmetically shifted in C, unsigned integers are logically shifted.</li>\n</ul>\n<p>In our case x is shifted arithmetically 31 times to the right which basically erases its valueand spreads the highest bit. That means, that the shift evaluates either to </p>\n<ul>\n<li>0x00000000 (MSB  = 0 → x is a positive number) or</li>\n<li>0xFFFFFFFF (MSB = 1 → x is a negative number).</li>\n</ul>\n<p>Note: 32 bit systems require a shift by 31, 64 bit systems require a shift by 63 accordingly.</p>\n<p>Consequently, in the following computation,</p>\n<ul>\n<li>For positive values of x (including x=0),  if turns out that to be (x XOR 0) − 0 . x XOR 0 is still x and x − 0 remains x, too. So for positive x we get x ≥ 0 is mapped to x.</li>\n<li>We saw that for negative values of x, bit31 is set to 0xFFFFFFFF. The computation is then (x XOR 0xFFFFFFFF) − 0xFFFFFFFF. The bracketed XOR is equivalent to NOT(x) and the constant −0xFFFFFFFF turns out to be −(-1) = +1. In the end, the whole term is NOT(x) + 1 = -x. But as x was negative, we obtain its positive value. </li>\n</ul>\n<p>Overall we compute the absolute value of x (where the implementation is specific for 32 vits integers).</p>","frontmatter":{"title":"Bits Manipulation","description":"Always useful"}}},"pageContext":{"slug":"/bits-manipulation/","previousPost":{"title":"Arrays","slug":"/arrays/"},"nextPost":null}},"staticQueryHashes":["3868140423","4085307986"]}